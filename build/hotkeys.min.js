/*! 
 * angular-hotkeys v1.6.0
 * https://chieffancypants.github.io/angular-hotkeys
 * Copyright (c) 2015 Wes Cruver
 * License: MIT
 */
"use strict";!function(a){angular.module("cfp.hotkeys",[]).provider("hotkeys",["$injector",function(a){var b;b=require("combokeys");var c=new b(document.documentElement);this.includeCheatSheet=!0,this.useNgRoute=a.has("ngViewDirective"),this.templateTitle="Keyboard Shortcuts:",this.templateHeader=null,this.templateFooter=null,this.template='<div class="cfp-hotkeys-container fade" ng-class="{in: helpVisible}" style="display: none;"><div class="cfp-hotkeys"><h4 class="cfp-hotkeys-title" ng-if="!header">{{ title }}</h4><div ng-bind-html="header" ng-if="header"></div><table><tbody><tr ng-repeat="hotkey in hotkeys | filter:{ description: \'!$$undefined$$\' }"><td class="cfp-hotkeys-keys"><span ng-repeat="key in hotkey.format() track by $index" class="cfp-hotkeys-key">{{ key }}</span></td><td class="cfp-hotkeys-text">{{ hotkey.description }}</td></tr></tbody></table><div ng-bind-html="footer" ng-if="footer"></div><div class="cfp-hotkeys-close" ng-click="toggleCheatSheet()">×</div></div></div>',this.cheatSheetHotkey="?",this.cheatSheetDescription="Show / hide this help menu",this.bubbleUpInputEventIn=[],this.$get=["$rootElement","$rootScope","$compile","$window","$document",function(a,d,e,f,g){function h(a,b){return(" "+b.className+" ").indexOf(" mousetrap ")>-1?!1:b.contentEditable&&"true"==b.contentEditable}function i(a){var b={command:"⌘",shift:"⇧",left:"←",right:"→",up:"↑",down:"↓","return":"↩",backspace:"⌫"};a=a.split("+");for(var c=0;c<a.length;c++)"mod"===a[c]&&(f.navigator&&f.navigator.platform.indexOf("Mac")>=0?a[c]="command":a[c]="ctrl"),a[c]=b[a[c]]||a[c];return a.join(" + ")}function j(a,b,c,d,e,f){this.combo=a instanceof Array?a:[a],this.description=b,this.callback=c,this.action=d,this.allowIn=e,this.persistent=f,this._formated=null}function k(){for(var a=t.hotkeys.length;a--;){var b=t.hotkeys[a];b&&!b.persistent&&n(b)}}function l(){t.helpVisible=!t.helpVisible,t.helpVisible?(z=o("esc"),n("esc"),m("esc",z.description,l,null,["INPUT","SELECT","TEXTAREA"])):(n("esc"),z!==!1&&m(z))}function m(a,b,d,e,f,g){var h,i=["INPUT","SELECT","TEXTAREA"],k=Object.prototype.toString.call(a);if("[object Object]"===k&&(b=a.description,d=a.callback,e=a.action,g=a.persistent,f=a.allowIn,a=a.combo),n(a),b instanceof Function?(e=d,d=b,b="$$undefined$$"):angular.isUndefined(b)&&(b="$$undefined$$"),void 0===g&&(g=!0),"function"==typeof d){h=d,f instanceof Array||(f=[]);for(var l,m=0;m<f.length;m++)f[m]=f[m].toUpperCase(),l=i.indexOf(f[m]),-1!==l&&i.splice(l,1);d=function(b){var c=!0;if(b){var d=b.target||b.srcElement,e=d.nodeName.toUpperCase();if((" "+d.className+" ").indexOf(" mousetrap ")>-1)c=!0;else for(var f=0;f<i.length;f++)if(i[f]===e){t.bubbleUpInputEventIn&&-1===t.bubbleUpInputEventIn.indexOf(a)&&(b.preventDefault(),b.stopPropagation());break}}c&&s(h.apply(this,arguments))}}var o=e;"string"!=typeof e&&(o=void 0),c.bind(a,s(d),e);for(var p=0;p<v.length;p++)v[p].bind(a,s(d),e);var q=new j(a,b,d,e,f,g);return t.hotkeys.push(q),q}function n(a){var b=a instanceof j?a.combo:a;c.unbind(b);for(var d=0;d<v.length;d++)v[d].unbind(b);if(angular.isArray(b)){for(var e=!0,f=b.length;f--;)e=n(b[f])&&e;return e}var g=t.hotkeys.indexOf(o(b));return g>-1?(t.hotkeys[g].combo.length>1?t.hotkeys[g].combo.splice(t.hotkeys[g].combo.indexOf(b),1):(angular.forEach(u,function(a){var b=a.indexOf(t.hotkeys[g]);-1!==b&&a.splice(b,1)}),t.hotkeys.splice(g,1)),!0):!1}function o(a){if(!a)return t.hotkeys;for(var b,c=0;c<t.hotkeys.length;c++)if(b=t.hotkeys[c],b.combo.indexOf(a)>-1)return b;return!1}function p(a){return a.$id in u||(u[a.$id]=[],a.$on("$destroy",function(){for(var b=u[a.$id].length;b--;)n(u[a.$id].pop())})),{add:function(b){var c;return c=arguments.length>1?m.apply(this,arguments):m(b),u[a.$id].push(c),this}}}function q(a){for(var c=new b(a.documentElement),d=0;d<t.hotkeys.length;d++){var e=t.hotkeys[d],f=e.action;"string"!=typeof e.action&&(f=void 0),c.bind(e.combo,e.callback,f)}v.push(c)}function r(a){for(var b=0;b<v.length;b++)if(v[b].element===a){v[b].detach(),v.splice(b,1);break}}function s(a){return function(b,c){if(a instanceof Array){var e=a[0],f=a[1];a=function(a){f.scope.$eval(e)}}d.$apply(function(){a(b,o(c))})}}b.prototype.stopCallback=h,j.prototype.format=function(){if(null===this._formated){for(var a=this.combo[0],b=a.split(/[\s]/),c=0;c<b.length;c++)b[c]=i(b[c]);this._formated=b}return this._formated};var t=d.$new();t.hotkeys=[],t.helpVisible=!1,t.title=this.templateTitle,t.header=this.templateHeader,t.footer=this.templateFooter,t.bubbleUpInputEventIn=this.bubbleUpInputEventIn,t.toggleCheatSheet=l;var u=[],v=[];if(this.useNgRoute&&d.$on("$routeChangeSuccess",function(a,b){k(),b&&b.hotkeys&&angular.forEach(b.hotkeys,function(a){var c=a[2];("string"==typeof c||c instanceof String)&&(a[2]=[c,b]),a[5]=!1,m.apply(this,a)})}),this.includeCheatSheet){var w=g[0],x=a[0],y=angular.element(this.template);m(this.cheatSheetHotkey,this.cheatSheetDescription,l),(x===w||x===w.documentElement)&&(x=w.body),angular.element(x).append(e(y)(t))}var z=!1,A={add:m,del:n,get:o,bindTo:p,template:this.template,toggleCheatSheet:l,includeCheatSheet:this.includeCheatSheet,cheatSheetHotkey:this.cheatSheetHotkey,cheatSheetDescription:this.cheatSheetDescription,useNgRoute:this.useNgRoute,purgeHotkeys:k,templateTitle:this.templateTitle,bubbleUpInputEventIn:this.bubbleUpInputEventIn,addIframeDoc:q,removeIframeDoc:r};return A}]}]).directive("hotkey",["hotkeys",function(a){return{restrict:"A",link:function(b,c,d){var e,f;angular.forEach(b.$eval(d.hotkey),function(b,c){f="string"==typeof d.hotkeyAllowIn?d.hotkeyAllowIn.split(/[\s,]+/):[],e=c,a.add({combo:c,description:d.hotkeyDescription,callback:b,action:d.hotkeyAction,allowIn:f})}),c.bind("$destroy",function(){a.del(e)})}}}]).run(["hotkeys",function(a){}])}(window),module.exports=function(a){var b=this,c=b.constructor;return b.callbacks={},b.directMap={},b.sequenceLevels={},b.resetTimer,b.ignoreNextKeyup=!1,b.ignoreNextKeypress=!1,b.nextExpectedAction=!1,b.element=a,b.addEvents(),c.instances.push(b),b},module.exports.prototype.bind=require("./prototype/bind"),module.exports.prototype.bindMultiple=require("./prototype/bindMultiple"),module.exports.prototype.unbind=require("./prototype/unbind"),module.exports.prototype.trigger=require("./prototype/trigger"),module.exports.prototype.reset=require("./prototype/reset.js"),module.exports.prototype.stopCallback=require("./prototype/stopCallback"),module.exports.prototype.handleKey=require("./prototype/handleKey"),module.exports.prototype.addEvents=require("./prototype/addEvents"),module.exports.prototype.bindSingle=require("./prototype/bindSingle"),module.exports.prototype.getKeyInfo=require("./prototype/getKeyInfo"),module.exports.prototype.pickBestAction=require("./prototype/pickBestAction"),module.exports.prototype.getReverseMap=require("./prototype/getReverseMap"),module.exports.prototype.getMatches=require("./prototype/getMatches"),module.exports.prototype.resetSequences=require("./prototype/resetSequences"),module.exports.prototype.fireCallback=require("./prototype/fireCallback"),module.exports.prototype.bindSequence=require("./prototype/bindSequence"),module.exports.prototype.resetSequenceTimer=require("./prototype/resetSequenceTimer"),module.exports.prototype.detach=require("./prototype/detach"),module.exports.instances=[],module.exports.reset=require("./reset"),module.exports.REVERSE_MAP=null;